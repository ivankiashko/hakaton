# Генерация документов для перепланировки

## Описание

Система автоматической генерации документов для согласования перепланировки квартир в соответствии с российским законодательством.

## Поддерживаемые документы

### 1. Заявление на перепланировку
**Тип:** `application`

Заявление в жилищную инспекцию о согласовании перепланировки жилого помещения согласно ПП РФ от 28.04.2005 № 266.

**Содержит:**
- Данные собственника (ФИО, паспорт, контакты)
- Адрес и параметры квартиры
- Описание планируемых работ
- Обязательства собственника
- Список приложений

**Требует:** анализ плана ✓

### 2. Техническое заключение
**Тип:** `technical_conclusion`

Техническое заключение о возможности и безопасности перепланировки.

**Содержит:**
- Объект обследования
- Нормативные документы (ЖК РФ, СНиП, СанПиН)
- Результаты технического анализа
- Выводы о возможности перепланировки
- Рекомендации по выполнению работ
- Оценка сроков и стоимости согласования

**Требует:** анализ плана ✓

### 3. Акт о завершении перепланировки
**Тип:** `completion_act`

Акт приемочной комиссии о завершенной перепланировке.

**Содержит:**
- Состав комиссии
- Результаты осмотра
- Подтверждение соответствия проекту
- Заключение комиссии

**Требует:** анализ плана ✗

### 4. Заявление в БТИ
**Тип:** `bti_application`

Заявление о внесении изменений в технический паспорт квартиры.

**Содержит:**
- Запрос на обновление техпаспорта
- Основания (распоряжение, акт приемки)
- Список приложений

**Требует:** анализ плана ✗

### 5. Чек-лист документов
**Тип:** `checklist`

Полный список необходимых документов для всех этапов согласования.

**Содержит:**
- Этап 1: Подготовка к согласованию
- Этап 2: Подача документов
- Этап 3: Выполнение работ
- Этап 4: Приемка работ
- Этап 5: Оформление изменений
- Важные сроки и контакты

**Требует:** анализ плана ✗

## Структура данных

### Данные собственника (OwnerData)

```typescript
interface OwnerData {
  full_name: string                // ФИО полностью
  passport_series: string          // Серия паспорта (4 цифры)
  passport_number: string          // Номер паспорта (6 цифр)
  passport_issued_by: string       // Кем выдан
  passport_issued_date: string     // Дата выдачи (ДД.ММ.ГГГГ)
  phone: string                    // Телефон
  email: string                    // Email
  registration_address?: string    // Адрес регистрации (опционально)
}
```

### Данные квартиры (ApartmentData)

```typescript
interface ApartmentData {
  address: string              // Адрес квартиры
  apartment_number: string     // Номер квартиры
  cadastral_number: string     // Кадастровый номер
  total_area: string          // Общая площадь (м²)
  building_year?: string      // Год постройки (опционально)
  building_series?: string    // Серия дома (опционально)
}
```

## API

### Получение списка типов документов

```http
GET /api/document-types
```

**Ответ:**
```json
{
  "document_types": [
    {
      "id": "application",
      "name": "Заявление на перепланировку",
      "description": "...",
      "requires_analysis": true
    },
    ...
  ]
}
```

### Генерация документа

```http
POST /api/generate-document
Content-Type: application/json
```

**Тело запроса:**
```json
{
  "apartment_data": {
    "address": "г. Москва, ул. Ленина, д. 1",
    "apartment_number": "123",
    "cadastral_number": "77:01:0001001:1234",
    "total_area": "45.5"
  },
  "owner_data": {
    "full_name": "Иванов Иван Иванович",
    "passport_series": "1234",
    "passport_number": "567890",
    "passport_issued_by": "ТП №1 ОУФМС России по г. Москве",
    "passport_issued_date": "01.01.2010",
    "phone": "+7 (900) 123-45-67",
    "email": "ivanov@example.com"
  },
  "plan": { ... },
  "analysis": { ... },
  "document_type": "application",
  "completion_date": "21.11.2025"  // опционально
}
```

**Ответ:**
```
Plain text документ
```

## Использование в интерфейсе

### Шаг 1: Заполнение данных

1. Перейдите на вкладку **"Документы"**
2. Заполните форму **"Данные собственника"**:
   - ФИО полностью
   - Паспортные данные
   - Контактная информация
3. Заполните форму **"Данные квартиры"**:
   - Адрес
   - Номер квартиры
   - Кадастровый номер
   - Площадь

### Шаг 2: Выбор типа документа

1. В разделе **"Генерация документов"** выберите тип документа
2. Прочитайте описание выбранного документа
3. Если требуется анализ - сначала выполните анализ плана на вкладке "Анализ"

### Шаг 3: Генерация

1. Нажмите кнопку **"Сгенерировать документ"**
2. Дождитесь завершения генерации
3. Просмотрите сгенерированный документ

### Шаг 4: Сохранение

Выберите действие:
- **"Копировать"** - скопировать документ в буфер обмена
- **"Скачать"** - сохранить документ как .txt файл

## Нормативная база

Генерируемые документы соответствуют следующим законодательным актам:

### Основные законы

- **ЖК РФ** - Жилищный кодекс Российской Федерации (ст. 25, 26, 29)
- **ПП РФ №266** - от 28.04.2005 "Об утверждении формы заявления о переустройстве и (или) перепланировке жилого помещения"

### Строительные нормы

- **СНиП 31-01-2003** - "Здания жилые многоквартирные"
- **СНиП 2.01.07-85*** - "Нагрузки и воздействия"
- **СНиП 2.04.01-85** - "Внутренний водопровод и канализация зданий"
- **СНиП 41-01-2003** - "Отопление, вентиляция и кондиционирование"

### Санитарные нормы

- **СанПиН 2.1.2.2645-10** - "Санитарно-эпидемиологические требования к условиям проживания в жилых зданиях и помещениях"

### Дополнительные документы

- **ПУЭ-7** - Правила устройства электроустановок (7-е издание)
- **ПП РФ №410** - от 14.05.2013 о мерах по обеспечению безопасности при использовании газа

## Особенности генерации

### Автоматическое заполнение

Документы автоматически заполняются данными:
- Текущая дата генерации
- Информация из анализа плана
- Описание планируемых работ
- Количество элементов (стены, двери, окна)
- Оценка сроков и стоимости

### Шаблоны

Все документы используют официальные формы и шаблоны, принятые в РФ.

### Персонализация

Каждый документ содержит:
- Уникальные данные собственника
- Конкретный адрес квартиры
- Детальное описание планируемых работ
- Ссылки на законодательство

## Процесс согласования перепланировки

### Полный цикл (с документами)

1. **Подготовка** (2-4 недели)
   - ✓ Техпаспорт БТИ
   - ✓ Выписка из ЕГРН
   - ✓ Проект перепланировки
   - ✓ **Техническое заключение** (генерируется)

2. **Согласование** (20-45 дней)
   - ✓ **Заявление на перепланировку** (генерируется)
   - Подача документов через МФЦ/Госуслуги
   - Рассмотрение жилищной инспекцией
   - Получение распоряжения о согласовании

3. **Выполнение работ** (1-6 месяцев)
   - Проведение ремонта по проекту
   - Ведение журнала работ
   - Контроль качества

4. **Приемка** (1-2 недели)
   - Вызов приемочной комиссии
   - ✓ **Акт о завершении** (генерируется)

5. **Оформление** (1-2 месяца)
   - ✓ **Заявление в БТИ** (генерируется)
   - Новый техпаспорт БТИ
   - Регистрация в Росреестре

### Важные сроки

- Рассмотрение заявления: **20-45 дней**
- Срок действия техзаключения: **1 год**
- Внесение изменений в БТИ: **до 30 дней** после завершения
- Регистрация в Росреестре: **7-12 рабочих дней**

### Стоимость

- Проект перепланировки: **30,000 - 50,000 ₽**
- Техническое заключение: **15,000 - 30,000 ₽**
- Новый техпаспорт БТИ: **2,000 - 5,000 ₽**
- Согласование (госпошлина): обычно бесплатно

**Общая стоимость:** 50,000 - 100,000 ₽

## Пример использования

```tsx
import { DocumentGenerator } from './components/DocumentGenerator'

function MyComponent() {
  const ownerData = {
    full_name: 'Иванов Иван Иванович',
    passport_series: '1234',
    passport_number: '567890',
    // ...
  }

  const apartmentData = {
    address: 'г. Москва, ул. Ленина, д. 1',
    apartment_number: '123',
    // ...
  }

  return (
    <DocumentGenerator
      plan={floorPlan}
      analysis={analysisResult}
      ownerData={ownerData}
      apartmentData={apartmentData}
    />
  )
}
```

## Ограничения

- Документы генерируются в текстовом формате (.txt)
- Требуется ручное заполнение некоторых полей перед подачей
- Сгенерированные документы являются шаблонами и требуют проверки юристом
- Не заменяют официальные проектные документы от организаций с допуском СРО

## Отказ от ответственности

Сгенерированные документы являются информационными шаблонами и не могут заменить официальные документы, подготовленные лицензированными организациями. Для точного согласования перепланировки обратитесь к специалистам с допуском СРО.
