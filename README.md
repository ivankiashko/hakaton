# Планировщик ремонта

> Умный цифровой сервис для планирования перепланировки квартир с автоматической проверкой соответствия российскому законодательству

[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)
[![Python](https://img.shields.io/badge/python-3.11+-blue.svg)](https://python.org)
[![React](https://img.shields.io/badge/react-18+-blue.svg)](https://react.dev)
[![TypeScript](https://img.shields.io/badge/typescript-5+-blue.svg)](https://typescriptlang.org)

## Описание проекта

**Планировщик ремонта** — это комплексное решение для тех, кто планирует перепланировку квартиры. Приложение помогает:

- Разобраться, какие работы разрешены законом
- Предупредить о рисках и ограничениях
- Визуализировать план перепланировки
- Оценить сроки и стоимость согласования
- Получить рекомендации по законодательству РФ

### Почему это важно?

Перепланировка квартиры — сложный процесс, связанный с множеством законодательных требований:
- ЖК РФ (Жилищный кодекс)
- СНиП (Строительные нормы и правила)
- СанПиН (Санитарные нормы)
- Постановления Правительства РФ

**Незаконная перепланировка грозит:**
- Штрафами от 2000 до 2500 рублей
- Предписанием вернуть квартиру в исходное состояние
- Принудительной продажей квартиры через суд
- Проблемами при продаже недвижимости

## Возможности

### Интерактивный редактор планировок
- Рисование стен (несущих и ненесущих)
- Добавление дверей и окон
- Привязка к сетке для точности
- Цветовая маркировка элементов
- Экспорт/импорт планов

### 3D Визуализация **[НОВОЕ!]**
- Реалистичная 3D модель квартиры с корректными масштабами
- Интерактивная навигация (вращение, масштабирование, панорамирование)
- Освещение сцены с тенями
- Цветовая кодировка элементов:
  - Несущие стены (красные)
  - Ненесущие перегородки (серые)
  - Окна (прозрачные синие)
  - Двери (коричневые)
  - Комнаты (цветные зоны по типу)
- Технологии: Three.js, React Three Fiber, @react-three/drei

### Генерация документов **[НОВОЕ!]**
Автоматическая генерация документов для согласования перепланировки по российским стандартам:
- **Заявление на перепланировку** (форма по ПП РФ №266)
- **Техническое заключение** о возможности перепланировки
- **Акт о завершении перепланировки**
- **Заявление в БТИ** для обновления техпаспорта
- **Чек-лист документов** для всех этапов согласования

Все документы соответствуют требованиям ЖК РФ, СНиП, СанПиН и содержат ссылки на законодательство.

### Умный анализатор
- Автоматическая проверка по 12+ категориям законодательства
- Определение уровня риска (критический/высокий/средний/низкий/безопасный)
- Конкретные рекомендации для каждого нарушения
- Оценка сроков согласования (от 1 до 6 месяцев)
- Оценка стоимости согласования (от 0 до 150,000 руб.)

### База знаний по законодательству

Проверка по следующим категориям:
1. **Несущие стены** — демонтаж запрещен (ЖК РФ ст. 26)
2. **Мокрые зоны** — перенос санузла и кухни (СанПиН 2.1.2.2645-10)
3. **Газовое оборудование** — работы с газом (ПП РФ №410)
4. **Вентиляция** — запрет на демонтаж вентканалов (СНиП 41-01-2003)
5. **Окна и фасады** — изменение оконных проемов (ЖК РФ ст. 26)
6. **Система отопления** — запрет на демонтаж радиаторов
7. **Водоснабжение** — перенос стояков (СНиП 2.04.01-85)
8. **Электроснабжение** — требования к проводке (ПУЭ 7)
9. **Ненесущие перегородки** — разрешенные работы
10. **Жилые помещения** — минимальные требования (СанПиН)
11. **Балконы и лоджии** — ограничения (СНиП 31-01-2003)
12. **Шумоизоляция** — требования к уровню шума

## Технологический стек

### Frontend
- **React 19** — современный UI фреймворк
- **TypeScript 5.9** — типизация для надежности
- **Vite 7** — быстрая сборка и HMR
- **TailwindCSS 4** — утилитарные стили
- **Konva.js** — интерактивная 2D canvas графика
- **Three.js** — 3D визуализация с WebGL
- **React Three Fiber** — React компоненты для Three.js
- **@react-three/drei** — полезные хелперы для 3D
- **Axios** — HTTP клиент
- **Lucide React** — иконки

### Backend
- **FastAPI** — современный Python веб-фреймворк
- **Pydantic** — валидация данных
- **Uvicorn** — ASGI сервер
- **Python 3.11+** — последняя версия Python

### Архитектура
- RESTful API
- JSON база данных правил
- Модульная архитектура
- Типобезопасность на всех уровнях

## Установка и запуск

### Быстрый запуск

Самый простой способ запустить проект:

**Windows:**
```bash
# Установка (запустить от имени администратора)
install-windows.bat

# Запуск
start.bat
```

**macOS:**
```bash
# Установка
chmod +x install-macos.sh
./install-macos.sh

# Запуск
./start.sh
```

**Linux:**
```bash
# Запуск
chmod +x start.sh
./start.sh
```

### Вариант 1: Docker Compose

```bash
# Клонируйте репозиторий
git clone <repository-url>
cd hakaton

# Запустите с помощью Docker Compose
docker-compose up -d

# Откройте в браузере
# Frontend: http://localhost:5173
# Backend API: http://localhost:8000
# API Docs: http://localhost:8000/docs
```

### Вариант 2: Ручной запуск

#### Backend

```bash
# Перейдите в директорию backend
cd backend

# Создайте виртуальное окружение
python -m venv venv
source venv/bin/activate  # Linux/Mac
# или
venv\Scripts\activate  # Windows

# Установите зависимости
pip install -r requirements.txt

# Запустите сервер
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

API будет доступен по адресу: http://localhost:8000

#### Frontend

```bash
# Перейдите в директорию frontend
cd frontend

# Установите зависимости
npm install

# Создайте .env файл
cp .env.example .env

# Запустите dev сервер
npm run dev
```

Приложение будет доступно по адресу: http://localhost:5173

## Использование

### 1. Создание плана

1. Откройте приложение в браузере
2. Настройте параметры квартиры на левой панели:
   - Тип дома (панельный/кирпичный/монолитный)
   - Этаж и количество этажей
   - Наличие газа
3. Используйте инструменты для рисования:
   - **Стена** - нарисуйте стены (выберите тип: несущая/ненесущая)
   - **Дверь** - добавьте дверь (кликните на стену)
   - **Окно** - добавьте окно (кликните на стену)

### 2. Анализ плана

1. Нажмите кнопку **"Анализировать план"**
2. Перейдите на вкладку **"Результаты анализа"**
3. Изучите предупреждения и рекомендации:
   - **Критично** - запрещено законом
   - **Высокий риск** - требует обязательного согласования
   - **Средний риск** - требует согласования в некоторых случаях
   - **Низкий риск** - минимальные ограничения
   - **Безопасно** - разрешено

### 3. Экспорт/Импорт

- **Экспорт** - сохраните план в JSON файл
- **Импорт** - загрузите ранее сохраненный план
- **Пример** - загрузите типовую планировку для начала работы

## API Endpoints

### `POST /api/analyze`
Анализ плана перепланировки

**Request Body:**
```json
{
  "originalPlan": {
    "walls": [...],
    "doors": [...],
    "windows": [...],
    "rooms": [...],
    "hasGasSupply": false,
    "floor": 1,
    "totalFloors": 9,
    "buildingType": "panel"
  },
  "actions": [...],
  "description": "Описание"
}
```

**Response:**
```json
{
  "isLegal": true,
  "requiresApproval": false,
  "warnings": [...],
  "recommendations": [...],
  "estimatedApprovalTime": "1-3 месяца",
  "estimatedCost": "25,000-50,000 руб."
}
```

### `GET /api/rules`
Получить все правила законодательства

### `GET /api/rules/{category}`
Получить правила по категории

### `POST /api/quick-check`
Быстрая проверка одного действия

## Преимущества решения

### Для пользователей
- **Быстро** - мгновенный анализ плана
- **Экономия** - избежать штрафов и переделок
- **Образование** - понятное объяснение законов
- **Наглядность** - визуализация плана
- **Прозрачность** - оценка сроков и стоимости

### Для бизнеса
- **Масштабируемость** - легко добавлять новые правила
- **Гибкость** - настройка под разные регионы
- **Монетизация** - премиум функции, консультации
- **B2B** - интеграция с застройщиками, риелторами
- **Мобильность** - адаптивный дизайн

## Планы развития

### Реализовано
- [x] **3D визуализация** — реалистичная 3D модель квартиры
- [x] **Генерация документов** — 5 типов документов по российским стандартам
- [x] **Формы ввода данных** — собственник и квартира
- [x] **База типовых планировок** — хрущевки, брежневки, студии
- [x] **Интерактивный редактор** — 2D canvas с Konva.js

### Краткосрочные (MVP+)
- [ ] AI-помощник для консультаций
- [ ] Мобильное приложение (React Native)
- [ ] Калькулятор стоимости ремонта
- [ ] Импорт планов из изображений (OCR/CV)
- [ ] Экспорт 3D модели в GLB/GLTF
- [ ] Текстурированные материалы в 3D

### Среднесрочные
- [ ] Интеграция с Госуслугами
- [ ] Экспорт документов в DOCX/PDF
- [ ] Marketplace подрядчиков
- [ ] AR-визуализация (дополненная реальность)
- [ ] Онлайн-консультации с экспертами
- [ ] VR режим просмотра квартиры

### Долгосрочные
- [ ] Федеральная платформа согласования
- [ ] Интеграция с БТИ
- [ ] AI-дизайнер интерьеров
- [ ] Blockchain для хранения данных о перепланировках

## Лицензия

MIT License - свободное использование с указанием авторства

## Команда

Проект создан для хакатона "Первый хакатон 5 сезона"

## Вклад

Приветствуются Pull Requests! Для серьезных изменений, пожалуйста, сначала откройте issue для обсуждения.

## Дисклеймер

Приложение предоставляет информацию для ознакомления. Для точного анализа и согласования перепланировки обратитесь к специалистам:
- Проектная организация с допуском СРО
- Жилищная инспекция
- БТИ (Бюро технической инвентаризации)

---

**Сделано для упрощения жизни миллионов людей**